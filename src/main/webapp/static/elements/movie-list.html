<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/fd-polymer-rest-service/fd-polymer-rest-service.html">
<link rel="import" href="movie-card.html">

<polymer-element name="movie-list" attributes="movieTitle pageNum pageSize">
    <template>

        <style>
            :host {
                display: block;
                width: 100%;
            }
            movie-card {
                margin-bottom: 30px;
                background: #03a9f4;
            }

        </style>

        <!--url="http://localhost:8090/rest/movie/byTitle/{{movieTitle}}/{{pageNum}}/{{pageSize}}"-->
        <core-ajax
                id="ajax"
                auto="false"
                url="http://localhost:8090/rest/movie/byTitle/{{movieTitle}}/{{pageNum}}/{{pageSize}}"
                method="GET"
                handleAs="json"
                response="{{movies}}">
        </core-ajax>


        <div layout vertical center>
            <template repeat="{{movie in movies['movies']}}">
                <movie-card>
                    <h2>{{movie.title}}</h2>
                    <h3>{{movie.movieid}}</h3>
                    <p id="link">{{movie.links[0].href}}</p>
                    <p id="tag">{{movie.tagline.taglinetext}}</p>
                </movie-card>
            </template>
        </div>

    </template>
    <script>
        Polymer({
            pageNum: "1",
            pageSize: "30",

            movieTitleChanged: function() {
                this.$.ajax.go();
            }
            /*,
            moviesChanged: function(oldValue) {
                console.log(this.movies['movies'][0])
            }
            */
        });
    </script>
</polymer-element>